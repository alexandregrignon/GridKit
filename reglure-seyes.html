<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Réglure Seyès</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="info">
        <nav>
            <a href="index.html">&larr; retour à la liste des templates</a>
        </nav>
        <h1>Réglure Seyès (A4)</h1>
        <p>Cette page est <a href="#" onclick="window.print(); return false;">imprimable</a> sur un format de papier A4 pour obtenir un papier Seyès (grands carreaux).</p>
        <p>Format standard : grille de 21 carreaux x 29 carreaux, soit 609 carreaux complets.</p>
        <div class="credits">
            Projet <a href="https://github.com/alexandregrignon/GridKit">GridKit</a> par <a href="https://alexandregrignon.fr">Alexandre Grignon</a>
        </div>
    </div>
    <div class="paper">
        <svg id="grid" width="210mm" height="297mm" xmlns="http://www.w3.org/2000/svg">
            <!-- La grille sera générée par le script -->
        </svg>
    </div>

    <script>
        (function(){
            const pageWidth = 210; // mm
            const pageHeight = 297; // mm
            const INTERLINE_HEIGHT = 8; // mm
            const SQUARES_X = 21; // nombre de carreaux à droite du trait rouge
            const SQUARES_Y = 29; // nombre de carreaux en hauteur
            const gridWidth = SQUARES_X * INTERLINE_HEIGHT; // 168mm de zone d'écriture
            const LEFT_MARGIN = pageWidth - gridWidth; // 42mm (espace restant)
            const svg = document.getElementById("grid");

            function createGrid() {
                const gridHeight = SQUARES_Y * INTERLINE_HEIGHT;
                const marginY = (pageHeight - gridHeight) / 2;

                // Nettoyage du SVG
                while (svg.firstChild) {
                    svg.removeChild(svg.firstChild);
                }

                // Création des groupes de lignes
                const mainLines = document.createElementNS("http://www.w3.org/2000/svg", "g");
                mainLines.setAttribute("stroke", "#a8c7e0");
                mainLines.setAttribute("stroke-width", "0.5");

                const subLines = document.createElementNS("http://www.w3.org/2000/svg", "g");
                subLines.setAttribute("stroke", "#d3e3f1");
                subLines.setAttribute("stroke-width", "0.2");

                // Lignes horizontales
                for (let i = 0; i <= SQUARES_Y; i++) {
                    const y = marginY + (i * INTERLINE_HEIGHT);
                    
                    // Ligne principale (de 0 jusqu'à la fin de la zone d'écriture)
                    const mainLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    mainLine.setAttribute("x1", "0");
                    mainLine.setAttribute("y1", y + "mm");
                    mainLine.setAttribute("x2", (LEFT_MARGIN + gridWidth) + "mm");
                    mainLine.setAttribute("y2", y + "mm");
                    mainLines.appendChild(mainLine);

                    if (i < SQUARES_Y) {
                        // Interlignes (également depuis 0)
                        [0.25, 0.5, 0.75].forEach(ratio => {
                            const subY = y + (INTERLINE_HEIGHT * ratio);
                            const subLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
                            subLine.setAttribute("x1", "0");
                            subLine.setAttribute("y1", subY + "mm");
                            subLine.setAttribute("x2", (LEFT_MARGIN + gridWidth) + "mm");
                            subLine.setAttribute("y2", subY + "mm");
                            subLines.appendChild(subLine);
                        });
                    }
                }

                // Lignes verticales (de haut en bas de la page)
                for (let i = 0; i <= SQUARES_X; i++) {
                    const x = LEFT_MARGIN + (i * INTERLINE_HEIGHT);
                    const vertLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    vertLine.setAttribute("x1", x + "mm");
                    vertLine.setAttribute("y1", "0");
                    vertLine.setAttribute("x2", x + "mm");
                    vertLine.setAttribute("y2", pageHeight + "mm");
                    subLines.appendChild(vertLine);
                }

                // Ligne de marge rouge (de haut en bas de la page)
                const marginLine = document.createElementNS("http://www.w3.org/2000/svg", "line");
                marginLine.setAttribute("x1", LEFT_MARGIN + "mm");
                marginLine.setAttribute("y1", "0");
                marginLine.setAttribute("x2", LEFT_MARGIN + "mm");
                marginLine.setAttribute("y2", pageHeight + "mm");
                marginLine.setAttribute("stroke", "#ff0000");
                marginLine.setAttribute("stroke-width", "0.5");

                // Ajout des éléments au SVG
                svg.appendChild(subLines);
                svg.appendChild(mainLines);
                svg.appendChild(marginLine);
            }

            // Création initiale de la grille
            createGrid();
        })();
    </script>
</body>
</html>
